<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>神社検定《壱級》過去問題</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    .group-text { font-weight: bold; margin-top: 20px; white-space: pre-wrap; }
    .question { margin-top: 10px; font-weight: bold; }
    .options button { display: block; margin: 5px 0; padding: 10px; width: 100%; }
    .explanation { color: green; margin-top: 10px; }
    .score { font-weight: bold; font-size: 1.2em; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>神社検定過去問題（試作版）</h1>
  <div id="quiz"></div>
  <div class="score" id="score"></div>

  <script>
    const quizData = [
      {
        groupId: "j01201001",
        groupText: "八神殿に関する以下の文章を読んで問１から問４までの設問に答えてください。\n　律令制における...",
        questions: [
          {
            qnum: "問１",
            question: "【ア】に入る言葉として正しいものを選んでください。",
            options: ["御巫（みかんなぎ）", "坐摩（いかすりの）巫", "御門（みかどの）巫", "生嶋（いくしまの）巫"],
            answer: 0,
            explanation: "『神社のいろは要語集　祭祀編』「八神殿」"
          },
          {
            qnum: "問２",
            question: "下線部の八神殿の説明として間違っているものを選んでください。",
            options: [
              "八神殿は神籬磐境の神勅に基づいて建てられた神殿とされている。",
              "宮中に八神殿が建てられたのは平城京からのことと推測されている。",
              "八神殿は、平安京では、神祇官の西院（斎院）内の西築垣側に一郭を占めていた。",
              "『延喜式』には、その祭祀の奉仕者が替わるたびに造替することが規定されていた。"
            ],
            answer: 1,
            explanation: "『神社のいろは要語集　祭祀編』「八神殿」"
          }
        ]
      }
    ];

    let currentGroup = 0;
    let currentQuestion = 0;
    let correctCount = 0;

    function loadQuestion() {
      const quiz = document.getElementById("quiz");
      quiz.innerHTML = "";
      const group = quizData[currentGroup];
      if (currentQuestion === 0) {
        const gText = document.createElement("div");
        gText.className = "group-text";
        gText.textContent = group.groupText;
        quiz.appendChild(gText);
      }

      const qData = group.questions[currentQuestion];
      const qDiv = document.createElement("div");
      qDiv.className = "question";
      qDiv.textContent = `${qData.qnum} ${qData.question}`;
      quiz.appendChild(qDiv);

      const optionsDiv = document.createElement("div");
      optionsDiv.className = "options";
      qData.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(idx, qData);
        optionsDiv.appendChild(btn);
      });
      quiz.appendChild(optionsDiv);
    }

    function checkAnswer(choice, qData) {
      const quiz = document.getElementById("quiz");
      const result = document.createElement("div");
      result.className = "explanation";
      if (choice === qData.answer) {
        result.textContent = "正解！ " + qData.explanation;
        correctCount++;
      } else {
        result.textContent = "不正解… " + qData.explanation;
      }
      quiz.appendChild(result);

      setTimeout(() => {
        currentQuestion++;
        if (currentQuestion < quizData[currentGroup].questions.length) {
          loadQuestion();
        } else {
          showScore();
        }
      }, 1500);
    }

    function showScore() {
      const scoreDiv = document.getElementById("score");
      const total = quizData[currentGroup].questions.length;
      scoreDiv.textContent = `あなたのスコア：${correctCount}問 / ${total}問中`;
    }

    loadQuestion();
  </script>
</body>
</html>
